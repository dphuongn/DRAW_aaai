import numpy as np  # 数组相关的库
import matplotlib.pyplot as plt  # 绘图库
from matplotlib.ticker import MultipleLocator

count = 0
with open('log/resnet_fedprox_no.log', 'r') as inF:
    for line in inF:
        if 'Global Model Test accuracy' in line:
            print(line[-10:-1], ",")
            count += 1
    # do_something

print("count = ", count)

y1 = np.array([
 0.100000 ,
 0.102000 ,
 0.199400 ,
 0.297200 ,
 0.326500 ,
 0.341500 ,
 0.348100 ,
 0.366300 ,
 0.388100 ,
 0.403100 ,
 0.422300 ,
 0.433900 ,
 0.470600 ,
 0.472000 ,
 0.498100 ,
 0.516900 ,
 0.550000 ,
 0.559300 ,
 0.576100 ,
 0.585400 ,
 0.601700 ,
 0.608000 ,
 0.618800 ,
 0.628300 ,
 0.637000 ,
 0.633600 ,
 0.641900 ,
 0.652100 ,
 0.654300 ,
 0.659100 ,
 0.662800 ,
 0.664000 ,
 0.669000 ,
 0.682200 ,
 0.683200 ,
 0.668200 ,
 0.685100 ,
 0.681100 ,
 0.693900 ,
 0.700800 ,
 0.695100 ,
 0.697900 ,
 0.699900 ,
 0.703200 ,
 0.702900 ,
 0.715700 ,
 0.711300 ,
 0.722300 ,
 0.721100 ,
 0.721400 ,
 0.733500 ,
 0.711200 ,
 0.725500 ,
 0.728300 ,
 0.733400 ,
 0.736200 ,
 0.740000 ,
 0.727000 ,
 0.740700 ,
 0.748000 ,
 0.731300 ,
 0.745600 ,
 0.732800 ,
 0.744400 ,
 0.737700 ,
 0.748100 ,
 0.746500 ,
 0.749200 ,
 0.747700 ,
 0.749500 ,
 0.747900 ,
 0.755400 ,
 0.753800 ,
 0.756600 ,
 0.755600 ,
 0.751100 ,
 0.756900 ,
 0.760200 ,
 0.761600 ,
 0.762400 ,
 0.758600 ,
 0.756800 ,
 0.762800 ,
 0.757100 ,
 0.769400 ,
 0.762800 ,
 0.758700 ,
 0.766600 ,
 0.759100 ,
 0.762700 ,
 0.762000 ,
 0.768700 ,
 0.770900 ,
 0.763700 ,
 0.768100 ,
 0.768800 ,
 0.765500 ,
 0.766100 ,
 0.772900 ,
 0.769900 ,
])


y2 = np.array([
 0.100000 ,
 0.100000 ,
 0.100000 ,
 0.149700 ,
 0.247800 ,
 0.338300 ,
 0.414600 ,
 0.459800 ,
 0.499000 ,
 0.546000 ,
 0.581800 ,
 0.600600 ,
 0.609000 ,
 0.616200 ,
 0.632100 ,
 0.640400 ,
 0.625600 ,
 0.661200 ,
 0.675300 ,
 0.676600 ,
 0.691400 ,
 0.679400 ,
 0.696800 ,
 0.702300 ,
 0.690500 ,
 0.703300 ,
 0.706700 ,
 0.718300 ,
 0.713000 ,
 0.709900 ,
 0.742000 ,
 0.746500 ,
 0.734900 ,
 0.740800 ,
 0.758800 ,
 0.739400 ,
 0.737500 ,
 0.744000 ,
 0.750300 ,
 0.738900 ,
 0.740000 ,
 0.762700 ,
 0.736400 ,
 0.764100 ,
 0.752400 ,
 0.749700 ,
 0.754800 ,
 0.758800 ,
 0.744700 ,
 0.741500 ,
 0.751000 ,
])

plt.figure(figsize=(10,7))
font1 = {
    'weight' : 'normal',
    'size'   : 16,
}
font2 = {
    'weight' : 'normal',
    'size'   : 16,
}
plt.legend(prop=font2)

plt.axhline(0.78)

plt.plot(np.arange(0,len(y1),1), y1,'-',linestyle='-', color='b', label='ResNet-32(FedProx)')

plt.plot(np.arange(0,len(y2),1), y2,'-',linestyle='-', color='r', label='ResNet-32(FedProx_DP)')


plt.xlabel('Rounds',fontdict=font1)
plt.ylabel('Accuracy',font1)
plt.legend(prop=font1)

plt.tight_layout()

plt.yticks(fontproperties = 'normal', size = 15)
tlist=plt.xticks(fontproperties = 'normal', size = 15)

plt.savefig('pdf/resnet_fedprox.pdf')
plt.show()
print(len(y2))